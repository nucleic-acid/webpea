<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Save Plots in WebP Image Format • webpea</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Save Plots in WebP Image Format">
<meta property="og:description" content="Provides a wrapper function for {ggplot2}'s ggsave(). Saves
    the specified plot in the *.webp imamge format. Results in
    considerably smaller file sizes when ompared to the common PNG format
    with no loss of image quality in most use cases.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">webpea</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nucleic-acid/webpea/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="webpea-">webpea <img src="reference/figures/webpea_hex.webp" align="right" width="150"><a class="anchor" aria-label="anchor" href="#webpea-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a> is to provide easy functions to save a plot in the <a href="https://en.wikipedia.org/wiki/WebP" class="external-link">WebP image file format</a>. There are other packages with the same purpose, such as <a href="https://github.com/jeroen/webp" class="external-link">webp</a>. In particular, <a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a> aims to be a drop-in replacement for <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> or to allow easy implementation in Rmarkdown and Quarto documents.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of webpea from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"nucleic-acid/webpea"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="drop-in-replacement-of-ggsave">Drop-in replacement of ggsave<a class="anchor" aria-label="anchor" href="#drop-in-replacement-of-ggsave"></a>
</h2>
<p><code><a href="reference/webpea.html">webpea::webpea()</a></code> can serve as drop-in replacement of <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code>. First, the plot is saved as a temporary PNG file, so all <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> parameters can be used as usual. Secondly the temporary PNG file is converted to WebP via the {magick} package.</p>
<p>If no plot is specified, <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> defaults to <code><a href="https://ggplot2.tidyverse.org/reference/last_plot.html" class="external-link">ggplot2::last_plot()</a></code>.:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># draw basic plot</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">hp</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example1-1.png" width="100%"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># save last plot to temporary file location</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot470452448b148.webp"</span></span></code></pre></div>
<p>All parameters for <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> are valid and can be specified in <code><a href="reference/webpea.html">webpea()</a></code>. You can also explicitly specify the plot to be saved. Additionally, you can specify the quality as percentage (defaults to 75 in the {magick} package, if not specified otherwise):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># draw first plot</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">hp</span>, color <span class="op">=</span> <span class="va">cyl</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># draw another plot</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">hp</span>, color <span class="op">=</span> <span class="va">gear</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save first plot to temporary file location</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot1_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  plot <span class="op">=</span> <span class="va">p1</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">90</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot1_4704525d2351e.webp"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-magicks-graphics-device">Using {magick}’s graphics device<a class="anchor" aria-label="anchor" href="#using-magicks-graphics-device"></a>
</h2>
<p>In case you want to prevent double file writing (i.e. intermediate PNG and the final WebP), you can draw the plot into {magick}’s graphics device in memory and save that image as WebP. <strong>Note:</strong> Since ggsave is not used in this approach, you cannot use its arguments for output-settings!</p>
<p>All options that can be passed to the graphics device are valid in <code><a href="reference/webpea.html">webpea()</a></code> as well. The options / defaults can be found in <a href="https://docs.ropensci.org/magick/reference/device.html" class="external-link">the documentation of <code>magick::image_graph()</code></a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># draw basic plot</span></span>
<span><span class="va">p_draw</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">hp</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save last plot to temporary file location</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  plot <span class="op">=</span> <span class="va">p_draw</span>,</span>
<span>  ggsave <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># this switches to the {magick} graphics device</span></span>
<span>  width <span class="op">=</span> <span class="fl">1920</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">1080</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">326</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">42</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot47045991db42.webp"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="when-size-matters">When size matters<a class="anchor" aria-label="anchor" href="#when-size-matters"></a>
</h2>
<p>The WebP image file format uses rather modern and effective compression algorithmy and allows for significant file size reduction when compared to PNG files. These reductions come with no visually apparent losses in the quality of the produced output in most use cases.</p>
<p>In times of digital communication of R outputs (e.g. HTML-output of Rmarkdown or Quarto) image file size is crucial for quick file transfer or reduced page loading times.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nucleic-acid/webpea" class="external-link">webpea</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># draw a plot</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">disp</span>, <span class="va">hp</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Sample plot of {mtcars}"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa.\n Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example3-1.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># save plot as PNG</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot_"</span>, fileext <span class="op">=</span> <span class="st">".png"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>,</span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; file size 233.2 kB</span></span></code></pre></div>
<p>This saves a PNG file with 5.120 * 2.880 pixels (14.7 MP) and 233.2 kB file size. When using WebP as output type, the images below have the same resolution in pixels, but significantly lower file sizes:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save plot with same settings for intermediate PNG and DEFAULT webp quality (75)</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>, <span class="co"># this is passed to ggsave. The final output will still be webp.</span></span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot_470454fa2e9cf.webp"</span></span>
<span><span class="co">#&gt; file size 81.7 kB</span></span>
<span></span>
<span></span>
<span><span class="co"># save plot with same PNG settings but LOWER webp quality</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot50_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>, <span class="co"># this is passed to ggsave. The final output will still be webp.</span></span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot50_4704548feac7.webp"</span></span>
<span><span class="co">#&gt; file size 72.3 kB</span></span>
<span></span>
<span><span class="co"># save plot with same PNG settings but EVEN LOWER webp quality</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot20_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>, <span class="co"># this is passed to ggsave. The final output will still be webp.</span></span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot20_4704531c6fcfc.webp"</span></span>
<span><span class="co">#&gt; file size 58.2 kB</span></span>
<span></span>
<span><span class="co"># save plot with same PNG settings but HIGHER webp quality</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot90_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>, <span class="co"># this is passed to ggsave. The final output will still be webp.</span></span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">90</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot90_4704537b9cd60.webp"</span></span>
<span><span class="co">#&gt; file size 113.0 kB</span></span>
<span></span>
<span><span class="co"># save plot with same PNG settings but HIGHEST webp quality</span></span>
<span><span class="fu"><a href="reference/webpea.html">webpea</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"plot100_"</span>, fileext <span class="op">=</span> <span class="st">".webp"</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  device <span class="op">=</span> <span class="st">"png"</span>, <span class="co"># this is passed to ggsave. The final output will still be webp.</span></span>
<span>  dpi <span class="op">=</span> <span class="st">"retina"</span>,</span>
<span>  quality <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp9zX7MA/plot100_470456793a789.webp"</span></span>
<span><span class="co">#&gt; file size 98.6 kB</span></span></code></pre></div>
<p>Oddly, the 100% quality version has a smaller file size than the 90% version. I don’t have an explanation for this, but the main takeaway is that, all WebP files are smaller than the original PNG. These results are just exemplatory, your milage may vary! Eventually, the ‘allowable’ loss of quality is to be defined by every user for themselves and for their specific use case.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sizes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PNG"</span>, <span class="st">"WebP 20%"</span>, <span class="st">"WebP 50%"</span>, <span class="st">"WebP 75% (default)"</span>, <span class="st">"WebP 90%"</span>, <span class="st">"WebP 100%"</span><span class="op">)</span>,</span>
<span>    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PNG"</span>, <span class="st">"WebP 20%"</span>, <span class="st">"WebP 50%"</span>, <span class="st">"WebP 75% (default)"</span>, <span class="st">"WebP 90%"</span>, <span class="st">"WebP 100%"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  size_kB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">233.2</span>, <span class="fl">58.2</span>, <span class="fl">72.3</span>, <span class="fl">81.7</span>, <span class="fl">113.0</span>, <span class="fl">98.6</span><span class="op">)</span>,</span>
<span>  cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PNG"</span>, <span class="st">"WebP"</span>, <span class="st">"WebP"</span>, <span class="st">"WebP"</span>, <span class="st">"WebP"</span>, <span class="st">"WebP"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">sizes</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">type</span>,</span>
<span>    y <span class="op">=</span> <span class="va">size_kB</span>,</span>
<span>    fill <span class="op">=</span> <span class="va">cat</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"WebP output is considerably smaller, than PNG output"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"The dimensions / resolution and plot content were kept constant for comparison. \nWebP was used with different compression options, given in %."</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    legend.title <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-comparison-1.png" width="100%"></p>
<table class="table">
<colgroup>
<col width="46%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th>PNG original</th>
<th>WebP with 20, 50, 75, 90 and 100% quality</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><img src="reference/figures/plot_cropped.png" alt="A zoomed and cropped part of the original PNG " align="right" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
<td><img src="reference/figures/plot20_cropped.webp" alt="The same zoom level and cropped part of the plot in a webp file." align="left" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
</tr>
<tr class="even">
<td><img src="reference/figures/plot_cropped.png" alt="A zoomed and cropped part of the original PNG " align="right" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
<td><img src="reference/figures/plot50_cropped.webp" alt="The same zoom level and cropped part of the plot in a webp file." align="left" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
</tr>
<tr class="odd">
<td><img src="reference/figures/plot_cropped.png" alt="A zoomed and cropped part of the original PNG " align="right" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
<td><img src="reference/figures/plot75_cropped.webp" alt="The same zoom level and cropped part of the plot in a webp file." align="left" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
</tr>
<tr class="even">
<td><img src="reference/figures/plot_cropped.png" alt="A zoomed and cropped part of the original PNG " align="right" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
<td><img src="reference/figures/plot90_cropped.webp" alt="The same zoom level and cropped part of the plot in a webp file." align="left" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
</tr>
<tr class="odd">
<td><img src="reference/figures/plot_cropped.png" alt="A zoomed and cropped part of the original PNG " align="right" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
<td><img src="reference/figures/plot100_cropped.webp" alt="The same zoom level and cropped part of the plot in a webp file." align="left" width="500" style="box-shadow: 4px 4px 3px grey;"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="how-to-contribute">How to contribute<a class="anchor" aria-label="anchor" href="#how-to-contribute"></a>
</h2>
<p>If you have ideas for improvements or new features feel free to fork and make pull requests to the dev branch. I’m always open to contributions!</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the webpea project is released with a Contributor Code of Conduct. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nucleic-acid/webpea/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/nucleic-acid/webpea/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing webpea</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christian A. Gebhard <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nucleic-acid/webpea/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/nucleic-acid/webpea/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Christian A. Gebhard.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
